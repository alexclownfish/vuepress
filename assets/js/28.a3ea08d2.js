(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{552:function(a,e,t){"use strict";t.r(e);var r=t(8),s=Object(r.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("安装环境:\n这里在vmware里虚拟的RHEL5，分配的内存1G，SWAP分区1G，建议最好把SWAP分区改成2G。否则安装时，到了测试的步骤会提示监测失败。（当然，如果你强行安装一样没问题）")]),a._v(" "),t("h3",{attrs:{id:"安装oracle-10g-release2-前的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装oracle-10g-release2-前的配置"}},[a._v("#")]),a._v(" 安装Oracle 10g Release2 前的配置")]),a._v(" "),t("h5",{attrs:{id:"_1-首先挂在光盘-安装oracle-10g-r2所需的软件包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-首先挂在光盘-安装oracle-10g-r2所需的软件包"}},[a._v("#")]),a._v(" 1. 首先挂在光盘，安装Oracle 10g R2所需的软件包")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# mkdir /mnt/cdrom\n# mount /dev/cdrom /mnt/cdrom\n# cd /mnt/cdrom/Server/\n# rpm -Uvh setarch-2*\n# rpm -Uvh make-3*\n# rpm -Uvh glibc-2*\n# rpm -Uvh libaio-0*\n# rpm -Uvh compat-libstdc++-33-3*\n# rpm -Uvh compat-gcc-34-3*\n# rpm -Uvh compat-gcc-34-c++-3*\n# rpm -Uvh gcc-4*\n# rpm -Uvh libXp-1*\n# rpm -Uvh openmotif22-*\n# rpm -Uvh compat-db-4*\n")])])]),t("p",[a._v("其中除了openmotif22-2.2.3-18和compat-db-4.2.52-5.1在第三张盘上，其余的包都在第一张盘上。")]),a._v(" "),t("h5",{attrs:{id:"_2-修改-etc-redhat-release文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改-etc-redhat-release文件"}},[a._v("#")]),a._v(" 2.修改/etc/redhat-release文件")]),a._v(" "),t("p",[a._v("因为Oracle 10g官方只支持到RHEL4为止，所以需要更改版本说明，编辑/etc/redhat-release文件,删除Red Hat Enterprise Linux Server release 5 (Tikanga)，改为redhat-4")]),a._v(" "),t("h5",{attrs:{id:"_3-修改内核参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改内核参数"}},[a._v("#")]),a._v(" 3.修改内核参数")]),a._v(" "),t("p",[a._v("#vim /etc/sysctl.conf")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("kernel.shmmni = 4096\nkernel.sem = 250 32000 100 128\nfs.file-max = 65536\nnet.ipv4.ip_local_port_range = 1024 65000\nnet.core.rmem_default=262144\nnet.core.rmem_max=262144\nnet.core.wmem_default=262144\nnet.core.wmem_max=262144\n")])])]),t("p",[a._v("使更改立即生效，使用下面的命令：")]),a._v(" "),t("p",[a._v("#sysctl -p")]),a._v(" "),t("h5",{attrs:{id:"_4-建立安装oracle需要的用户-组-及目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-建立安装oracle需要的用户-组-及目录"}},[a._v("#")]),a._v(" 4.建立安装Oracle需要的用户，组，及目录")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("#groupadd oinstall\n#groupadd dba\n#groupadd oper\n#useradd -g oinstall -G dba oracle\n#passwd oracle\n\n#mkdir /oracle\n#chown -R oracle:oinstall /oracle\n#chmod -R 775 /oracle\n")])])]),t("p",[a._v("安装oracle的目录建议安装在一个单独的分区或者磁盘上。")]),a._v(" "),t("h5",{attrs:{id:"_5-设置oracle用户的shell-limit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-设置oracle用户的shell-limit"}},[a._v("#")]),a._v(" 5.设置oracle用户的shell limit")]),a._v(" "),t("p",[a._v("#vi /etc/security/limits.conf")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("oracle soft nproc 2047\noracle hard nproc 16384\noracle soft nofile 1024\noracle hard nofile 65536\n")])])]),t("p",[a._v("接下来更改/etc/pam.d/login文件，添加下面的内容，使shell limit生效：")]),a._v(" "),t("p",[a._v("#vi /etc/pam.d/login")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("session                  required                pam_limits.so\n")])])]),t("h5",{attrs:{id:"_6-配置ip地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-配置ip地址"}},[a._v("#")]),a._v(" 6.配置IP地址")]),a._v(" "),t("p",[a._v("安装RHEL的时候最好采用静态IP地址，如果当时选择的是DHCP，现在需要更改/etc/sysconfig/network-scripts/ifcfg-eth0文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[root@TSM54-Test network-scripts]# cat ifcfg-eth0\n# Advanced Micro Devices [AMD] 79c970 [PCnet32 LANCE]\nDEVICE=eth0\nBOOTPROTO=static\nHWADDR=00:0C:29:4B:17:C4\nONBOOT=yes\nIPADDR=192.168.68.98\nNETMASK=255.255.255.0\nGATEWAY=192.168.68.10\n")])])]),t("h5",{attrs:{id:"_7-配置oracle用户的环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-配置oracle用户的环境变量"}},[a._v("#")]),a._v(" 7.配置oracle用户的环境变量")]),a._v(" "),t("p",[a._v("下面的操作，该用oracle用户登陆执行了。")]),a._v(" "),t("p",[a._v("为了防止安装oracle时出现乱码，先把语言环境改为英文,在终端里输入:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[oracle@TSM54-TEST ~]$export LC_CTYPE=en_US.UTF-8\n")])])]),t("p",[a._v("接下来，编辑/home/oracle目录下的.bash_profile文件，添加如下内容：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('export ORACLE_BASE=/oracle\nexport ORACLE_HOME=$ORACLE_BASE/product/10.2.0/db_1\nexport ORACLE_SID=orcl\nexport PATH=$PATH:$ORACLE_HOME/bin\nexport LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib\nCLASSPATH=$ORACLE_HOME/JRE:$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib\nexport CLASSPATH\n\n\nif [ $USER = "oracle" ]; then\n        if [ $SHELL = "/bin/ksh" ]; then\n                ulimit -p 16384\n                ulimit -n 65536\n        else\n                ulimit -u 16384 -n 65536\n        fi\nfi\n')])])]),t("h3",{attrs:{id:"可以用oracle用户登陆进入系统安装-或者用第三方工具xmanager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#可以用oracle用户登陆进入系统安装-或者用第三方工具xmanager"}},[a._v("#")]),a._v(" 可以用oracle用户登陆进入系统安装，或者用第三方工具xmanager")]),a._v(" "),t("h5",{attrs:{id:"然后安装xmanager-启动xstart-在host填写linux的ip地址-选择ssh协议-用户名和密码与linux登陆一样-选择用户界面-在command-下选择gnome-我的是gnome-最后run-然后打开xshell-就能够远程控制linux了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#然后安装xmanager-启动xstart-在host填写linux的ip地址-选择ssh协议-用户名和密码与linux登陆一样-选择用户界面-在command-下选择gnome-我的是gnome-最后run-然后打开xshell-就能够远程控制linux了"}},[a._v("#")]),a._v(" 然后安装Xmanager,启动Xstart 在HOST填写LINUX的IP地址，选择SSH协议，用户名和密码与LINUX登陆一样，选择用户界面，在Command 下选择GNOME  我的是GNOME ，最后RUN，然后打开Xshell 就能够远程控制LINUX了")]),a._v(" "),t("h3",{attrs:{id:"安装oracle-10g"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装oracle-10g"}},[a._v("#")]),a._v(" 安装Oracle 10g")]),a._v(" "),t("p",[a._v("我把10201_database_linux32.zip放在/opt目录下，并通过")]),a._v(" "),t("p",[a._v("#unzip 10201_database_linux32.zip解压，现在使用oracle用户到/opt/database目录下执行安装:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[oracle@TSM54-Test opt]$ cd /opt/database/\n[oracle@TSM54-Test database]$ ls\ndoc install response runInstaller stage welcome.html\n[oracle@TSM54-Test database]$ ./runInstaller\n")])])]),t("p",[a._v("然后根据自己真实环境通过图形化界面安装oracle10g\n这里暂时不做多余说明，后续会将图放上来")]),a._v(" "),t("h3",{attrs:{id:"数据库的启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库的启动"}},[a._v("#")]),a._v(" 数据库的启动")]),a._v(" "),t("p",[a._v("启动过程分为：启动实例、由实例装载数据库、打开数据库\nSQL> startup nomount\n只启动实例")]),a._v(" "),t("p",[a._v("SQL> startup mount\n启动实例，并加载数据库，但不打开数据库")]),a._v(" "),t("p",[a._v("SQL> startup\n启动实例、由实例装载数据库、打开数据库")]),a._v(" "),t("p",[a._v("SQL> alter database mount;\n如果使用startup nomount启动实例，可以用此命令加载数据库，但不会启动数据库")]),a._v(" "),t("p",[a._v("SQL> alter database open;\n如果当前处于数据库已加载状态，可以使用此命令打开数据库")]),a._v(" "),t("p",[a._v("9：关闭数据库\nSQL> shutdown normal\n等同于直接使用shutdown命令，")]),a._v(" "),t("p",[a._v("SQL> shutdown immediate")]),a._v(" "),t("p",[a._v("SQL> shutdown transactional")]),a._v(" "),t("p",[a._v("SQL> shutdown abort")]),a._v(" "),t("p",[a._v("10：启动与关闭监听\n[oracle@oracle ~]$ lsnrctl start")]),a._v(" "),t("p",[a._v("[oracle@oracle ~]$ lsnrctl stop")]),a._v(" "),t("p",[a._v("[oracle@oracle ~]$ lsnrctl")]),a._v(" "),t("p",[a._v("LSNRCTL for Linux: Version 12.2.0.1.0 - Production on 03-8月 -2018 05:08:52")]),a._v(" "),t("p",[a._v("Copyright (c) 1991, 2016, Oracle.  All rights reserved.")]),a._v(" "),t("p",[a._v('欢迎来到LSNRCTL, 请键入"help"以获得信息。')]),a._v(" "),t("p",[a._v("LSNRCTL>")]),a._v(" "),t("h3",{attrs:{id:"配置oracle开机自启动实例-监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置oracle开机自启动实例-监听"}},[a._v("#")]),a._v(" 配置oracle开机自启动实例，监听")]),a._v(" "),t("p",[a._v("1.修改/etc/oratab文件，将N改为Y即可")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("#vim /etc/oratab\n#game:/u01/app/oracle/product/10.2.0/db_1:Y\n--格式：$ORACLE_SID:$ORACLE_HOME:<N|Y>   \n--<N|Y>选项代表开机是否自启动\n--game:/u01/app/oracle/product/10.2.0/db_1:N   --dbca创建库时注册的默认信息\n")])])]),t("p",[a._v("2.确认dbstart文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("#cd $ORACLE_HOME/bin\n#ls -ll | grep dbstart\n#vim dbstart\n--dbstart为开机自启动脚本，让系统开机就去执行dbstart脚本文件，它会去读oratab文件，读到Y就会把对应的实例开机自启动\n\n--调整或确认监听路径，如ORACLE_HOME_LISTNER=/ade/vikrkuma_new/oracle或ORACLE_HOME_LISTNER=$ORACLE_HOME根据设置的监听调整路径\n")])])]),t("p",[a._v("3.编辑/etc/rc.d/rc.local")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('#vim /etc/rc.d/rc.local #添加如下两行启动实例，启动监听\nsu - oracle -c"/u01/app/oracle/product/10.2.0/db_1/bin/dbstart"\nsu - oracle -c"/u01/app/oracle/product/10.2.0/db_1/bin/lsnrctl start"\n--命令中-c代表执行脚本，脚本dbstart中指定启动的实例，脚本lsnrctl中启动配置的监听\n')])])]),t("p",[a._v("小结：\nlinux下设置实例自启动有关脚本：")]),a._v(" "),t("p",[a._v("oratab：实例是否自启动的注册信息")]),a._v(" "),t("p",[a._v("dbstart：开机启动脚本文件会读取oratab信息")]),a._v(" "),t("p",[a._v("rc.local：开机后立即要做的文件")]),a._v(" "),t("p",[a._v("到此结束，愉快的开始oracle之旅")]),a._v(" "),t("h4",{attrs:{id:"数据库常用sql语句集合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库常用sql语句集合"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://alexcld.com/posts/1651.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("数据库常用sql语句集合"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"解决oracle不能上下翻历史命令问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决oracle不能上下翻历史命令问题"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://alexcld.com/posts/3246.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("解决oracle不能上下翻历史命令问题"),t("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=s.exports}}]);