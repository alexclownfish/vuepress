(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{543:function(e,t,s){"use strict";s.r(t);var a=s(8),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h3",{attrs:{id:"关于跳板机-堡垒机的介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于跳板机-堡垒机的介绍"}},[e._v("#")]),e._v(" 关于跳板机/堡垒机的介绍：")]),e._v(" "),s("p",[e._v("跳板机可以使开发或运维人员在维护过程中首先要统一登录到这台服务器，然后再登录到目标设备进行维护和操作")]),e._v(" "),s("h3",{attrs:{id:"跳板机使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跳板机使用场景"}},[e._v("#")]),e._v(" 跳板机使用场景：")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210122105747380.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTUwOTU4Mg==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),e._v(" "),s("h3",{attrs:{id:"jumpserver概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jumpserver概述"}},[e._v("#")]),e._v(" jumpserver概述")]),e._v(" "),s("p",[e._v("Jumpserver是一款开源的开源的堡垒机，可使系统的管理员和开发人员安全的连接到企业内部服务器上执行操作，并且支持大部分操作系统，是一款非常安全的远程连接工具")]),e._v(" "),s("h3",{attrs:{id:"常见支持的系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见支持的系统"}},[e._v("#")]),e._v(" 常见支持的系统：")]),e._v(" "),s("p",[e._v("CentOS, RedHat, Fedora, Amazon Linux\nDebian\nSUSE, Ubuntu\nFreeBSD\n其他ssh协议硬件设备")]),e._v(" "),s("h3",{attrs:{id:"部署步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署步骤"}},[e._v("#")]),e._v(" 部署步骤")]),e._v(" "),s("h5",{attrs:{id:"实验环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实验环境"}},[e._v("#")]),e._v(" 实验环境")]),e._v(" "),s("h5",{attrs:{id:"tips-该实验需要虚拟机接入互联网-使虚拟机上网可看我的另一个文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips-该实验需要虚拟机接入互联网-使虚拟机上网可看我的另一个文章"}},[e._v("#")]),e._v(" Tips:"),s("a",{attrs:{href:"https://alexcld.com/posts/2356.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("该实验需要虚拟机接入互联网，使虚拟机上网可看我的另一个文章"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("关闭selinux")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#setenforce 0\n")])])]),s("p",[e._v("关闭防火墙")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#systemctl stop firewalld\n[root@centos7 ~]#iptables -F\n")])])]),s("h5",{attrs:{id:"安装docker的源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装docker的源"}},[e._v("#")]),e._v(" 安装docker的源")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#yum -y install wget\n[root@centos7 ~]#cd /etc/yum.repos.d/\n[root@centos7 ~]#wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n[root@centos7 ~]#wget http://mirrors.aliyun.com/repo/Centos-7.repo\n[root@centos7 ~]#yum -y install centos-release-openstack-ocata\n")])])]),s("h5",{attrs:{id:"配置mariadb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置mariadb"}},[e._v("#")]),e._v(" 配置mariadb")]),e._v(" "),s("p",[e._v("安装mariadb")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#yum -y install mariadb-server\n")])])]),s("p",[e._v("修改配置文件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#vim /etc/my.cnf\n[client-server]\n\n[mysqld]\n\nsymbolic-links=0\n#禁止主机名解析\nskip_name_resolve\n\n!includedir /etc/my.cnf.d\n")])])]),s("p",[e._v("启动服务")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#systemctl start mariadb\n[root@centos7 ~]#systemctl enable mariadb\n")])])]),s("p",[e._v("创建jumpserver数据库并授权")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#mysql\nMariaDB [(none)]> create database jumpserver default charset 'utf8';\n#创建管理账号，密码必须是数字加字母\nMariaDB [(none)]> grant all on jumpserver.* to 'jumpserver'@'%' identified by 'ywz0207.';\n")])])]),s("h5",{attrs:{id:"配置redis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置redis"}},[e._v("#")]),e._v(" 配置Redis")]),e._v(" "),s("p",[e._v("安装Redis")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#yum install epel-release\n[root@centos7 ~]#yum -y install redis\n")])])]),s("p",[e._v("编辑配置文件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#vim /etc/redis.conf \n61：bind 0.0.0.0\n480：requirepass 123\n")])])]),s("p",[e._v("启动服务")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#systemctl start redis\n[root@centos7 ~]#systemctl enable redis\n")])])]),s("h5",{attrs:{id:"配置docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置docker"}},[e._v("#")]),e._v(" 配置docker")]),e._v(" "),s("p",[e._v("安装docker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#yum -y install docker-ce\n")])])]),s("p",[e._v("启动docker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#systemctl start docker\n[root@centos7 ~]#systemctl enable docker\n")])])]),s("p",[e._v("下载jumpserver镜像，并运行")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#docker run --name jms_all -d \\\n    -v /opt/mysql:/var/lib/mysql \\\n    -v /opt/jumpserver:/opt/jumpserver/data/media \\\n    -p 80:80 \\\n    -p 2222:2222 \\\n    -e SECRET_KEY=PEHVdLzvZFtDQT733ntHDH1hglXQ9OQKoI1xxAfdDhpRGx3tg7 \\\n    -e BOOTSTRAP_TOKEN=YDzl55tZPTdclbUh \\\n    -e DB_HOST=192.168.10.101 \\ #当前主机IP\n    -e DB_PORT=3306 \\ \n    -e DB_USER=jumpserver \\ #数据库用户\n    -e DB_PASSWORD=ywz0207. \\ #数据库密码\n    -e DB_NAME=jumpserver \\ #数据库名称\n    -e REDIS_HOST=192.168.10.101 \\\n    -e REDIS_PORT=6379 \\\n    -e REDIS_PASSWORD=123 \\ #Redis密码\n    jumpserver/jms_all:1.4.8\n")])])]),s("p",[e._v("查看状态")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[root@centos7 ~]#docker logs -f jms_all\n#看到如下几行即可\ngunicorn is running: 57\ncelery is running: 73\nbeat is running: 75\nguacd[98]: INFO:    Guacamole proxy daemon (guacd) version 0.9.14 started\nStarting guacd: SUCCESS\nTomcat started.\nUse eventlet dispatch\nStart coco process\nUse eventlet dispatch\nStart coco process\nUse eventlet dispatch\nStart coco process\nJumpserver ALL 1.4.8\n官网 http://www.jumpserver.org\n文档 http://docs.jumpserver.org\n有问题请参考 http://docs.jumpserver.org/zh/docs/faq.html\n")])])]),s("p",[e._v("进入容器命令")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker exec -it jms_all /bin/bash\n")])])]),s("p",[e._v("访问测试\n登入web界面，初始密码账号均为admin")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210122110648550.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTUwOTU4Mg==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),e._v(" "),s("h4",{attrs:{id:"后续主机列表配置-策略-用户策略等相关截图过多-自己琢磨吧。网上有相关文档可参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后续主机列表配置-策略-用户策略等相关截图过多-自己琢磨吧。网上有相关文档可参考"}},[e._v("#")]),e._v(" 后续主机列表配置，策略，用户策略等相关截图过多，自己琢磨吧。网上有相关文档可参考")])])}),[],!1,null,null,null);t.default=r.exports}}]);